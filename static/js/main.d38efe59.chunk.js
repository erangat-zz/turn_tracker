(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{260:function(e,n,t){},261:function(e,n,t){},262:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),u=t(87),c=t.n(u),o=(t(94),t(95),t(7)),i=Object(r.createContext)(),l=function(e){var n=e.reducer,t=e.initialState,u=e.children;return a.a.createElement(i.Provider,{value:Object(r.useReducer)(n,t)},u)},s=function(){return Object(r.useContext)(i)},m=t(88);t(86);var d=function(e){var n=Object(r.useState)(!1),t=Object(o.a)(n,2),u=t[0],c=t[1],i=Object(r.useState)(e.color),l=Object(o.a)(i,2),s=l[0],d=l[1],f=Object(r.useState)(e.name),E=Object(o.a)(f,2),v=E[0],y=E[1],p=Object(r.useRef)(null),b=e.id,O=e.onChange;return Object(r.useEffect)(function(){O({name:v,color:s,id:b})},[v,s]),a.a.createElement("div",{className:"PlayerCard"},a.a.createElement("div",{className:"PlayerCard-info-container"},u?a.a.createElement("div",{className:"PlayerCard-popover"},a.a.createElement("div",{className:"PlayerCard-cover",onClick:function(){c(!1)}}),a.a.createElement(m.TwitterPicker,{onChange:function(n){d(n.hex),c(!1),e.onChange({name:v,color:n,id:b})},triangle:"hide"})):null,a.a.createElement("div",{className:"PlayerCard-picture"},a.a.createElement("p",null," Pic ")),a.a.createElement("div",{className:"PlayerCard-name"},a.a.createElement("form",{onSubmit:function(e){p.current.blur(),e.preventDefault()}},a.a.createElement("input",{placeholder:"Player"+e.id,ref:p,type:"text",value:e.name,onChange:function(e){y(e.target.value)}}))),a.a.createElement("div",{className:"PlayerCard-remove"},a.a.createElement("p",{onClick:function(){return e.onRemove(e.id)}}," Remove "))),a.a.createElement("div",{className:"PlayerCard-color",style:{backgroundColor:s},onClick:function(){c(!u)}}))},f=t(13),E=t(3),v="ADD_PLAYER",y="REMOVE_PLAYER",p="UPDATE_PLAYER",b="SET_TURNS",O={playersAdded:2,players:[{name:"P1",color:"#FF0000",id:1},{name:"P2",color:"#00FF00",id:2}],turns:[]},h=function(e,n){switch(console.log(n.type),console.log(e),n.type){case v:return function(e){var n=e.playersAdded+1,t=[].concat(Object(f.a)(e.players),[{name:"",color:"#111111",id:n}]);return Object(E.a)({},e,{players:t,playersAdded:n})}(e);case y:return function(e,n){var t=n.players.filter(function(n){return n.id!==e});return Object(E.a)({},n,{players:t})}(n.playerId,e);case p:return function(e,n,t){return Object(E.a)({},t,{players:t.players.map(function(t){return t.id===e?n:t})})}(n.playerId,n.player,e);case b:return function(e,n){return console.log("setTurns"),console.log(n),console.log(e),Object(E.a)({},n,{turns:e})}(n.turns,e);default:return e}};var R=function(e){var n=s(),t=Object(o.a)(n,2),r=t[0],u=t[1],c=r.players;return a.a.createElement("div",{className:"playerSelect"},a.a.createElement("h1",null," Player Select "),c.map(function(e,n){return a.a.createElement(d,{name:e.name,color:e.color,id:e.id,key:n,onRemove:function(){return u({type:y,playerId:e.id})},onChange:function(n){return u({type:p,playerId:e.id,player:n})}})}),a.a.createElement("button",{onClick:function(){return u({type:v})}},"Add"),a.a.createElement("div",{className:"btn-bottom-big",onClick:function(){return e.onNext()}},"Start"))},T="MAKE_TIMER_ACTIVE",k="PAUSE_TIMER",P="TIMER_TICK",j="END_ROUND",g="START_ROUND",N=function(e){return{activeTimer:0,activeTicks:0,timers:e.map(function(e,n){return{name:e.name,color:e.color,ticks:0}}),isPaused:!0,endRoundTimer:0,roundNumber:1,isEndOfRound:!0,isFirstPlayOfRound:!0,turns:[]}},C=function(e){return{name:e.isEndOfRound?"Setup":e.timers[e.activeTimer].name,duration:e.isEndOfRound?e.endRoundTimer:e.activeTicks,round:e.roundNumber}},S=function(e,n){switch(n.type){case T:return function(e,n){return e===n.activeTimer||n.isFirstPlayOfRound?Object(E.a)({},n,{activeTimer:e,isPaused:!1,isFirstPlayOfRound:!1}):Object(E.a)({},n,{activeTimer:e,isPaused:!1,turns:[].concat(Object(f.a)(n.turns),[C(n)]),activeTicks:0})}(n.timerId,e);case"NEXT_TIMER":return function(e){var n=e.timers.length,t=e.activeTimer+1%n;return Object(E.a)({},e,{activeTimer:t,turns:[].concat(Object(f.a)(e.turns),[C(e)]),activeTicks:0})}(e);case k:return function(e){return Object(E.a)({},e,{isPaused:!0})}(e);case P:return function(e){if(e.isEndOfRound)return Object(E.a)({},e,{endRoundTimer:e.endRoundTimer+1});var n=Object(f.a)(e.timers);return n[e.activeTimer].ticks++,Object(E.a)({},e,{timers:n,activeTicks:e.activeTicks+1})}(e);case"UPDATE_PLAYER":return function(e,n,t){return Object(E.a)({},t,{players:t.players.map(function(t){return t.id===e?n:t})})}(n.playerId,n.player,e);case g:return function(e){return Object(E.a)({},e,{isEndOfRound:!1,turns:[].concat(Object(f.a)(e.turns),[C(e)]),activeTicks:0})}(e);case j:return function(e){return Object(E.a)({},e,{roundNumber:e.roundNumber+1,isEndOfRound:!0,isPaused:!0,turns:[].concat(Object(f.a)(e.turns),[C(e)]),endRoundTimer:0,isFirstPlayOfRound:!0})}(e);default:return e}},w=(t(260),function(e){return e<10?"0"+e:""+e}),A=function(e){var n=e%10,t=Math.floor(e/10),r=t%60,a=Math.floor(t/60)%60;return Math.floor(a/60)+":"+w(a)+":"+w(r)+"."+n},I=function(e){var n=e%10,t=Math.floor(e/10),r=t%60;return Math.floor(t/60)+":"+w(r)+"."+n};var M=function(e){return a.a.createElement("div",{className:"timer",style:{backgroundColor:e.color}},a.a.createElement("h2",null,e.name," - ",A(e.ticks)),a.a.createElement("div",{className:"buttons"},a.a.createElement("button",{onClick:function(){return e.onStart()}}," Start"),a.a.createElement("button",{onClick:function(){return e.onPause()}}," Pause")))};t(261);var _=function(e){return a.a.createElement("div",{className:"round"},a.a.createElement("h1",null," Round ",e.roundNumber),a.a.createElement("h2",null,A(e.roundTimer)),a.a.createElement("div",{className:"buttons"},a.a.createElement("button",{onClick:function(){return e.onStart()}}," Start Round"),a.a.createElement("button",{onClick:function(){return e.onEndGame()}}," End Game")))};var x=function(e){var n=s(),t=Object(o.a)(n,2),u=t[0],c=t[1],i=u.players,l=Object(r.useReducer)(S,N(i)),m=Object(o.a)(l,2),d=m[0],f=m[1];return Object(r.useEffect)(function(){var e;return!d.isEndOfRound&&d.isPaused||(e=setInterval(function(){return f({type:P})},100)),function(){return clearInterval(e)}},[d.isPaused,d.isEndOfRound]),a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",null,"Game in Progress"),a.a.createElement("div",{className:"gameTimers"},d.isEndOfRound?a.a.createElement(_,{roundNumber:d.roundNumber,roundTimer:d.endRoundTimer,onStart:function(){return f({type:g})},onEndGame:function(){console.log("onEndGame"),console.log(d),c({type:b,turns:d.turns}),e.onNext()}}):a.a.createElement(a.a.Fragment,null,d.timers.map(function(e,n){return a.a.createElement(M,{key:n,id:n,color:e.color,ticks:e.ticks,name:e.name,onStart:function(){return f({type:T,timerId:n})},onPause:function(){return f({type:k,timerId:n})}})}),a.a.createElement("p",{className:"btn-bottom-big",onClick:function(){return f({type:j})}},"EndRound"))))},F=function(e){return e.reduce(function(e,n){return e+n},0)};function D(e,n){var t=new Map;return e.forEach(function(e){var r=n(e),a=t.get(r);a?a.push(e):t.set(r,[e])}),t}var U=function(e,n,t){var r=D(e,function(e){return n(e)}),a=[],u=!0,c=!1,o=void 0;try{for(var i,l=r.keys()[Symbol.iterator]();!(u=(i=l.next()).done);u=!0){var s=i.value,m=r.get(s).map(function(e){return t(e)}),d=F(m);a.push({key:s,total:d})}}catch(f){c=!0,o=f}finally{try{u||null==l.return||l.return()}finally{if(c)throw o}}return a},G=function(e,n){return e.duration<n.duration?e:n},L=function(){var e=s(),n=Object(o.a)(e,1)[0].turns,t=F(n.map(function(e){return e.duration})),r=n.filter(function(e){return"Setup"!==e.name}),u=r.reduce(G,{duration:1e4}),c=function(e){var n,t=D(e,function(e){return e.name}),r=[],a=!0,u=!1,c=void 0;try{for(var o,i=t.keys()[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var l=o.value,s=t.get(l).map(function(e){return e.duration}),m=Math.floor((n=s,Math.floor(n.reduce(function(e,n){return e+n},0)/n.length)));r.push({player:l,average:m})}}catch(d){u=!0,c=d}finally{try{a||null==i.return||i.return()}finally{if(u)throw c}}return r}(r),i=function(e){return U(e,function(e){return e.round},function(e){return e.duration})}(n),l=function(e){return U(e,function(e){return e.name},function(e){return e.duration})}(r);return console.log(l),a.a.createElement("div",{className:"summary"},a.a.createElement("h1",null,"Summary"),a.a.createElement("h2",null," Total Duration "),a.a.createElement("p",null," ",A(t)),a.a.createElement("h2",null," Shortest Turn "),a.a.createElement("p",null,"Shortest Turn: R",u.round,": ",u.name," -"," ",I(u.duration)," "),a.a.createElement("h2",null," Player Average "),c.map(function(e,n){return a.a.createElement("p",{key:n},"Player: ",e.key," AverageTurn: ",I(e.average))}),a.a.createElement("h2",null,"Player totals"),l.map(function(e,n){return a.a.createElement("p",{key:n},"Round: ",e.key,", Total: ",A(e.total))}),a.a.createElement("h2",null,"Round totals"),i.map(function(e,n){return a.a.createElement("p",{key:n},"Round: ",e.key,", Total: ",A(e.total))}))};var Y=function(){var e=Object(r.useState)(1),n=Object(o.a)(e,2),t=n[0],u=n[1],c=function(){u(t+1)};switch(t){case 1:return a.a.createElement(R,{onNext:c});case 2:return a.a.createElement(x,{onNext:c});case 3:return a.a.createElement(L,null);default:return null}},B=function(){return a.a.createElement("div",{className:"app"},a.a.createElement("div",{className:"app-container"},a.a.createElement(l,{initialState:O,reducer:h},a.a.createElement(Y,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},86:function(e,n,t){},89:function(e,n,t){e.exports=t(262)},94:function(e,n,t){},95:function(e,n,t){}},[[89,1,2]]]);
//# sourceMappingURL=main.d38efe59.chunk.js.map