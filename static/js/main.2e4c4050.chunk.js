(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,n,t){},101:function(e,n,t){},266:function(e,n,t){},267:function(e,n,t){},274:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(90),u=t.n(c),o=t(94),i=(t(100),t(101),t(7)),l=Object(r.createContext)(),s=function(e){var n=e.reducer,t=e.initialState,c=e.children;return a.a.createElement(l.Provider,{value:Object(r.useReducer)(n,t)},c)},m=function(){return Object(r.useContext)(l)},d=t(91);t(88);var f=function(e){var n=Object(r.useState)(!1),t=Object(i.a)(n,2),c=t[0],u=t[1],o=Object(r.useState)(e.color),l=Object(i.a)(o,2),s=l[0],m=l[1],f=Object(r.useState)(e.name),E=Object(i.a)(f,2),v=E[0],p=E[1],y=Object(r.useRef)(null),b=e.id,O=e.onChange;return Object(r.useEffect)(function(){O({name:v,color:s,id:b})},[v,s]),a.a.createElement("div",{className:"PlayerCard"},a.a.createElement("div",{className:"PlayerCard-info-container"},c?a.a.createElement("div",{className:"PlayerCard-popover"},a.a.createElement("div",{className:"PlayerCard-cover",onClick:function(){u(!1)}}),a.a.createElement(d.TwitterPicker,{onChange:function(n){m(n.hex),u(!1),e.onChange({name:v,color:n,id:b})},triangle:"hide"})):null,a.a.createElement("div",{className:"PlayerCard-picture"},a.a.createElement("p",null," Pic ")),a.a.createElement("div",{className:"PlayerCard-name"},a.a.createElement("form",{onSubmit:function(e){y.current.blur(),e.preventDefault()}},a.a.createElement("input",{placeholder:"Player"+e.id,ref:y,type:"text",value:e.name,onChange:function(e){p(e.target.value)}}))),a.a.createElement("div",{className:"PlayerCard-remove"},a.a.createElement("p",{onClick:function(){return e.onRemove(e.id)}}," Remove "))),a.a.createElement("div",{className:"PlayerCard-color",style:{backgroundColor:s},onClick:function(){u(!c)}}))},E=t(15),v=t(4),p="ADD_PLAYER",y="REMOVE_PLAYER",b="UPDATE_PLAYER",O="SET_TURNS",P={playersAdded:2,players:[{name:"P1",color:"#FF0000",id:1},{name:"P2",color:"#00FF00",id:2}],turns:[]},h=function(e,n){switch(console.log(n.type),console.log(e),n.type){case p:return function(e){var n=e.playersAdded+1,t=[].concat(Object(E.a)(e.players),[{name:"",color:"#111111",id:n}]);return Object(v.a)({},e,{players:t,playersAdded:n})}(e);case y:return function(e,n){var t=n.players.filter(function(n){return n.id!==e});return Object(v.a)({},n,{players:t})}(n.playerId,e);case b:return function(e,n,t){return Object(v.a)({},t,{players:t.players.map(function(t){return t.id===e?n:t})})}(n.playerId,n.player,e);case O:return function(e,n){return console.log("setTurns"),console.log(n),console.log(e),Object(v.a)({},n,{turns:e})}(n.turns,e);default:return e}};var j=function(e){var n=m(),t=Object(i.a)(n,2),r=t[0],c=t[1],u=r.players;return a.a.createElement("div",{className:"playerSelect"},a.a.createElement("h1",null," Player Select "),u.map(function(e,n){return a.a.createElement(f,{name:e.name,color:e.color,id:e.id,key:n,onRemove:function(){return c({type:y,playerId:e.id})},onChange:function(n){return c({type:b,playerId:e.id,player:n})}})}),a.a.createElement("button",{onClick:function(){return c({type:p})}},"Add"),a.a.createElement("div",{className:"btn-bottom-big",onClick:function(){return e.onNext()}},"Start"))},R="MAKE_TIMER_ACTIVE",T="PAUSE_TIMER",g="TIMER_TICK",k="END_ROUND",N="START_ROUND",C=function(e){return{activeTimer:0,activeTicks:0,timers:e.map(function(e,n){return{name:e.name,color:e.color,ticks:0}}),isPaused:!0,endRoundTimer:0,roundNumber:1,isEndOfRound:!0,isFirstPlayOfRound:!0,turns:[]}},S=function(e){return{name:e.timers[e.activeTimer].name,duration:e.activeTicks,round:e.roundNumber}},I=function(e,n){switch(n.type){case R:return function(e,n){return e===n.activeTimer||n.isFirstPlayOfRound?Object(v.a)({},n,{activeTimer:e,isPaused:!1,isFirstPlayOfRound:!1}):Object(v.a)({},n,{activeTimer:e,isPaused:!1,turns:[].concat(Object(E.a)(n.turns),[S(n)]),activeTicks:0})}(n.timerId,e);case"NEXT_TIMER":return function(e){var n=e.timers.length,t=e.activeTimer+1%n;return Object(v.a)({},e,{activeTimer:t,turns:[].concat(Object(E.a)(e.turns),[S(e)]),activeTicks:0})}(e);case T:return function(e){return Object(v.a)({},e,{isPaused:!0})}(e);case g:return function(e){if(e.isEndOfRound)return Object(v.a)({},e,{endRoundTimer:e.endRoundTimer+1});var n=Object(E.a)(e.timers);return n[e.activeTimer].ticks++,Object(v.a)({},e,{timers:n,activeTicks:e.activeTicks+1})}(e);case"UPDATE_PLAYER":return function(e,n,t){return Object(v.a)({},t,{players:t.players.map(function(t){return t.id===e?n:t})})}(n.playerId,n.player,e);case N:return function(e){return Object(v.a)({},e,{isEndOfRound:!1})}(e);case k:return function(e){return Object(v.a)({},e,{roundNumber:e.roundNumber+1,isEndOfRound:!0,isPaused:!0,turns:[].concat(Object(E.a)(e.turns),[S(e)]),activeTicks:0,isFirstPlayOfRound:!0})}(e);default:return e}},w=(t(266),function(e){return e<10?"0"+e:""+e}),A=function(e){var n=e%10,t=Math.floor(e/10),r=t%60,a=Math.floor(t/60)%60;return Math.floor(a/60)+":"+w(a)+":"+w(r)+":"+n},M=function(e){var n=e%10,t=Math.floor(e/10),r=t%60;return Math.floor(t/60)+":"+w(r)+":"+n};var _=function(e){return a.a.createElement("div",{className:"timer",style:{backgroundColor:e.color}},a.a.createElement("h1",null,e.name," - ",A(e.ticks)),a.a.createElement("div",{className:"buttons"},a.a.createElement("button",{onClick:function(){return e.onStart()}}," Start"),a.a.createElement("button",{onClick:function(){return e.onPause()}}," Pause")))};t(267);var x=function(e){return a.a.createElement("div",{className:"round"},a.a.createElement("h1",null," Round ",e.roundNumber),a.a.createElement("div",{className:"buttons"},a.a.createElement("button",{onClick:function(){return e.onStart()}}," Start Round"),a.a.createElement("button",{onClick:function(){return e.onEndGame()}}," End Game")))};var F=function(e){var n=m(),t=Object(i.a)(n,2),c=t[0],u=t[1],o=c.players,l=Object(r.useReducer)(I,C(o)),s=Object(i.a)(l,2),d=s[0],f=s[1];return Object(r.useEffect)(function(){var e;return!d.isEndOfRound&&d.isPaused||(e=setInterval(function(){return f({type:g})},100)),function(){return clearInterval(e)}},[d.isPaused,d.isEndOfRound]),a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",null,"Game in Progress"),a.a.createElement("div",{className:"gameTimers"},d.isEndOfRound?a.a.createElement(x,{roundNumber:d.roundNumber,onStart:function(){return f({type:N})},onEndGame:function(){console.log("onEndGame"),console.log(d),u({type:O,turns:d.turns}),e.onNext()}}):a.a.createElement(a.a.Fragment,null,d.timers.map(function(e,n){return a.a.createElement(_,{key:n,id:n,color:e.color,ticks:e.ticks,name:e.name,onStart:function(){return f({type:R,timerId:n})},onPause:function(){return f({type:T,timerId:n})}})}),a.a.createElement("p",{className:"btn-bottom-big",onClick:function(){return f({type:k})}},"EndRound"))))};function D(e,n){var t=new Map;return e.forEach(function(e){var r=n(e),a=t.get(r);a?a.push(e):t.set(r,[e])}),t}var U=function(){var e=m(),n=Object(i.a)(e,1)[0],t=n.turns,r=t.reduce(function(e,n){return e.duration<n?e:n},{duration:-1}),c=function(e){var n,t=[],r=D(e.map(function(e){return{playerId:e.name,duration:e.duration}}),function(e){return e.playerId}),a=!0,c=!1,u=void 0;try{for(var o,i=r.keys()[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var l=o.value,s=r.get(l);console.log(s);var m=(n=s.map(function(e){return e.duration})).reduce(function(e,n){return e+n},0)/n.length;t.push({key:l,average:m})}}catch(d){c=!0,u=d}finally{try{a||null==i.return||i.return()}finally{if(c)throw u}}return t}(t),u=D(n.turns,function(e){return e.round});return console.log(u),a.a.createElement("div",{className:"summary"},a.a.createElement("h1",null,"Summary"),a.a.createElement("p",null,"Shortest Turn: R",r.round,": ",r.name," -"," ",M(r.duration)," "),c.map(function(e,n){return a.a.createElement("p",{key:n},"Player: ",e.key," AverageTurn: ",M(e.average))}))};var G=function(){var e=Object(r.useState)(1),n=Object(i.a)(e,2),t=n[0],c=n[1],u=function(){c(t+1)};switch(t){case 1:return a.a.createElement(j,{onNext:u});case 2:return a.a.createElement(F,{onNext:u});case 3:return a.a.createElement(U,null);default:return null}},L=function(){return a.a.createElement("div",{className:"app"},a.a.createElement("div",{className:"app-container"},a.a.createElement(s,{initialState:P,reducer:h},a.a.createElement(G,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(a.a.createElement(o.a,null,a.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},88:function(e,n,t){},95:function(e,n,t){e.exports=t(274)}},[[95,1,2]]]);
//# sourceMappingURL=main.2e4c4050.chunk.js.map