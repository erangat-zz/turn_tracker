(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{260:function(e,n,t){},261:function(e,n,t){},262:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(87),u=t.n(c),o=(t(94),t(95),t(7)),i=Object(r.createContext)(),l=function(e){var n=e.reducer,t=e.initialState,c=e.children;return a.a.createElement(i.Provider,{value:Object(r.useReducer)(n,t)},c)},s=function(){return Object(r.useContext)(i)},m=t(88);t(86);var d=function(e){var n=Object(r.useState)(!1),t=Object(o.a)(n,2),c=t[0],u=t[1],i=Object(r.useState)(e.color),l=Object(o.a)(i,2),s=l[0],d=l[1],f=Object(r.useState)(e.name),v=Object(o.a)(f,2),E=v[0],p=v[1],y=Object(r.useRef)(null),b=e.id,O=e.onChange;return Object(r.useEffect)(function(){O({name:E,color:s,id:b})},[E,s]),a.a.createElement("div",{className:"PlayerCard"},a.a.createElement("div",{className:"PlayerCard-info-container"},c?a.a.createElement("div",{className:"PlayerCard-popover"},a.a.createElement("div",{className:"PlayerCard-cover",onClick:function(){u(!1)}}),a.a.createElement(m.TwitterPicker,{onChange:function(n){d(n.hex),u(!1),e.onChange({name:E,color:n,id:b})},triangle:"hide"})):null,a.a.createElement("div",{className:"PlayerCard-picture"},a.a.createElement("p",null," Pic ")),a.a.createElement("div",{className:"PlayerCard-name"},a.a.createElement("form",{onSubmit:function(e){y.current.blur(),e.preventDefault()}},a.a.createElement("input",{placeholder:"Player"+e.id,ref:y,type:"text",value:e.name,onChange:function(e){p(e.target.value)}}))),a.a.createElement("div",{className:"PlayerCard-remove"},a.a.createElement("p",{onClick:function(){return e.onRemove(e.id)}}," Remove "))),a.a.createElement("div",{className:"PlayerCard-color",style:{backgroundColor:s},onClick:function(){u(!c)}}))},f=t(15),v=t(3),E="ADD_PLAYER",p="REMOVE_PLAYER",y="UPDATE_PLAYER",b="SET_TURNS",O={playersAdded:2,players:[{name:"P1",color:"#FF0000",id:1},{name:"P2",color:"#00FF00",id:2}],turns:[]},h=function(e,n){switch(console.log(n.type),console.log(e),n.type){case E:return function(e){var n=e.playersAdded+1,t=[].concat(Object(f.a)(e.players),[{name:"",color:"#111111",id:n}]);return Object(v.a)({},e,{players:t,playersAdded:n})}(e);case p:return function(e,n){var t=n.players.filter(function(n){return n.id!==e});return Object(v.a)({},n,{players:t})}(n.playerId,e);case y:return function(e,n,t){return Object(v.a)({},t,{players:t.players.map(function(t){return t.id===e?n:t})})}(n.playerId,n.player,e);case b:return function(e,n){return console.log("setTurns"),console.log(n),console.log(e),Object(v.a)({},n,{turns:e})}(n.turns,e);default:return e}};var P=function(e){var n=s(),t=Object(o.a)(n,2),r=t[0],c=t[1],u=r.players;return a.a.createElement("div",{className:"playerSelect"},a.a.createElement("h1",null," Player Select "),u.map(function(e,n){return a.a.createElement(d,{name:e.name,color:e.color,id:e.id,key:n,onRemove:function(){return c({type:p,playerId:e.id})},onChange:function(n){return c({type:y,playerId:e.id,player:n})}})}),a.a.createElement("button",{onClick:function(){return c({type:E})}},"Add"),a.a.createElement("div",{className:"btn-bottom-big",onClick:function(){return e.onNext()}},"Start"))},j="MAKE_TIMER_ACTIVE",R="PAUSE_TIMER",T="TIMER_TICK",g="END_ROUND",k="START_ROUND",N=function(e){return{activeTimer:0,activeTicks:0,timers:e.map(function(e,n){return{name:e.name,color:e.color,ticks:0}}),isPaused:!0,endRoundTimer:0,roundNumber:1,isEndOfRound:!0,isFirstPlayOfRound:!0,turns:[]}},C=function(e){return{name:e.timers[e.activeTimer].name,duration:e.activeTicks,round:e.roundNumber}},S=function(e,n){switch(n.type){case j:return function(e,n){return e===n.activeTimer||n.isFirstPlayOfRound?Object(v.a)({},n,{activeTimer:e,isPaused:!1,isFirstPlayOfRound:!1}):Object(v.a)({},n,{activeTimer:e,isPaused:!1,turns:[].concat(Object(f.a)(n.turns),[C(n)]),activeTicks:0})}(n.timerId,e);case"NEXT_TIMER":return function(e){var n=e.timers.length,t=e.activeTimer+1%n;return Object(v.a)({},e,{activeTimer:t,turns:[].concat(Object(f.a)(e.turns),[C(e)]),activeTicks:0})}(e);case R:return function(e){return Object(v.a)({},e,{isPaused:!0})}(e);case T:return function(e){if(e.isEndOfRound)return Object(v.a)({},e,{endRoundTimer:e.endRoundTimer+1});var n=Object(f.a)(e.timers);return n[e.activeTimer].ticks++,Object(v.a)({},e,{timers:n,activeTicks:e.activeTicks+1})}(e);case"UPDATE_PLAYER":return function(e,n,t){return Object(v.a)({},t,{players:t.players.map(function(t){return t.id===e?n:t})})}(n.playerId,n.player,e);case k:return function(e){return Object(v.a)({},e,{isEndOfRound:!1})}(e);case g:return function(e){return Object(v.a)({},e,{roundNumber:e.roundNumber+1,isEndOfRound:!0,isPaused:!0,turns:[].concat(Object(f.a)(e.turns),[C(e)]),activeTicks:0,isFirstPlayOfRound:!0})}(e);default:return e}},I=(t(260),function(e){return e<10?"0"+e:""+e}),w=function(e){var n=Math.floor(e/10),t=n%60,r=Math.floor(n/60)%60;return Math.floor(r/60)+":"+I(r)+":"+I(t)},A=function(e){var n=e%10,t=Math.floor(e/10),r=t%60;return Math.floor(t/60)+":"+I(r)+":"+n};var M=function(e){return a.a.createElement("div",{className:"timer",style:{backgroundColor:e.color}},a.a.createElement("h2",null,e.name," - ",w(e.ticks)),a.a.createElement("div",{className:"buttons"},a.a.createElement("button",{onClick:function(){return e.onStart()}}," Start"),a.a.createElement("button",{onClick:function(){return e.onPause()}}," Pause")))};t(261);var _=function(e){return a.a.createElement("div",{className:"round"},a.a.createElement("h1",null," Round ",e.roundNumber),a.a.createElement("div",{className:"buttons"},a.a.createElement("button",{onClick:function(){return e.onStart()}}," Start Round"),a.a.createElement("button",{onClick:function(){return e.onEndGame()}}," End Game")))};var x=function(e){var n=s(),t=Object(o.a)(n,2),c=t[0],u=t[1],i=c.players,l=Object(r.useReducer)(S,N(i)),m=Object(o.a)(l,2),d=m[0],f=m[1];return Object(r.useEffect)(function(){var e;return!d.isEndOfRound&&d.isPaused||(e=setInterval(function(){return f({type:T})},100)),function(){return clearInterval(e)}},[d.isPaused,d.isEndOfRound]),a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",null,"Game in Progress"),a.a.createElement("div",{className:"gameTimers"},d.isEndOfRound?a.a.createElement(_,{roundNumber:d.roundNumber,onStart:function(){return f({type:k})},onEndGame:function(){console.log("onEndGame"),console.log(d),u({type:b,turns:d.turns}),e.onNext()}}):a.a.createElement(a.a.Fragment,null,d.timers.map(function(e,n){return a.a.createElement(M,{key:n,id:n,color:e.color,ticks:e.ticks,name:e.name,onStart:function(){return f({type:j,timerId:n})},onPause:function(){return f({type:R,timerId:n})}})}),a.a.createElement("p",{className:"btn-bottom-big",onClick:function(){return f({type:g})}},"EndRound"))))};function F(e,n){var t=new Map;return e.forEach(function(e){var r=n(e),a=t.get(r);a?a.push(e):t.set(r,[e])}),t}var D=function(){var e=s(),n=Object(o.a)(e,1)[0],t=n.turns,r=t.reduce(function(e,n){return e.duration<n?e:n},{duration:-1}),c=function(e){var n,t=[],r=F(e.map(function(e){return{playerId:e.name,duration:e.duration}}),function(e){return e.playerId}),a=!0,c=!1,u=void 0;try{for(var o,i=r.keys()[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var l=o.value,s=r.get(l);console.log(s);var m=(n=s.map(function(e){return e.duration}),Math.floor(n.reduce(function(e,n){return e+n},0)/n.length));t.push({key:l,average:m})}}catch(d){c=!0,u=d}finally{try{a||null==i.return||i.return()}finally{if(c)throw u}}return t}(t),u=F(n.turns,function(e){return e.round});return console.log(u),a.a.createElement("div",{className:"summary"},a.a.createElement("h1",null,"Summary"),a.a.createElement("p",null,"Shortest Turn: R",r.round,": ",r.name," -"," ",A(r.duration)," "),c.map(function(e,n){return a.a.createElement("p",{key:n},"Player: ",e.key," AverageTurn: ",A(e.average))}))};var U=function(){var e=Object(r.useState)(1),n=Object(o.a)(e,2),t=n[0],c=n[1],u=function(){c(t+1)};switch(t){case 1:return a.a.createElement(P,{onNext:u});case 2:return a.a.createElement(x,{onNext:u});case 3:return a.a.createElement(D,null);default:return null}},G=function(){return a.a.createElement("div",{className:"app"},a.a.createElement("div",{className:"app-container"},a.a.createElement(l,{initialState:O,reducer:h},a.a.createElement(U,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(a.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},86:function(e,n,t){},89:function(e,n,t){e.exports=t(262)},94:function(e,n,t){},95:function(e,n,t){}},[[89,1,2]]]);
//# sourceMappingURL=main.7fe71431.chunk.js.map